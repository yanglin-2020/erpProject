<!DOCTYPE html>
<html class="x-admin-sm">
    
    <head>
        <meta charset="UTF-8">
        <title>欢迎页面-X-admin2.2</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
        <link rel="stylesheet" href="./css/font.css">
        <link rel="stylesheet" href="./css/xadmin.css">
        <script type="text/javascript" src="./js/jquery.min.js"></script>
        <script src="./lib/layui/layui.js" charset="utf-8"></script>
        <script type="text/javascript" src="./js/xadmin.js"></script>
    </head>
    
    <body>
        <div class="x-nav">
            <span class="layui-breadcrumb">
                <a href="">生产计划管理</a>
                <a>
                    <cite>生产计划查询</cite>
                </a>
            </span>
            <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
                <i class="layui-icon layui-icon-refresh" style="line-height:30px"></i>
            </a>
        </div>
        <div class="layui-fluid">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-card">
                        <div class="layui-card-body ">
							
                           <table id="all" lay-filter="test" class="all"></table>
						</div>
                    </div>
                </div>
            </div>
       </div>
    </body>
    <script>
		layui.use('table', function(){
		  var table = layui.table;
		  //所有的生产计划信息
		  table.render({
		    elem: '#all'
		    ,height: 312
		    ,url: 'allMapply' //数据接口
		    ,page: true //开启分页
		    ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
		    ,id:'testReload'
		    ,cols: 
			    [
			    	[ //表头
			      {field: 'id', title: '序列', width:80, sort: true, fixed: true}
			      ,{field: 'apply_id', title: '生产计划编号', width:130}
			      ,{field: 'product_id', title: '产品编号', width:130}
			      ,{field: 'product_name', title: '产品名称', width:80} 
			      ,{field: 'product_describe', title: '产品描述', width: 177}
			      ,{field: 'type', title: '类型', width: 80}
			      ,{field: 'amount', title: '数量', width: 80}
			      ,{field: 'designer', title: '设计人', width: 80}
			      ,{field: 'remark', title: '备注', width: 135}
			      ,{field: 'register', title: '登记人', width: 80}
			      ,{field: 'register_time', title: '登记时间', width: 135,templet: function(m){return layui.util.toDateString(m.register_time)}}
			      ,{field: 'checker', title: '复核人', width: 80}
			      ,{field: 'check_suggestion', title: '审核意见', width: 135}
			      ,{field: 'check_time', title: '审核时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.check_time)}}
			    	]
			    ]
		  });
		  
		  
		  //头工具栏事件
		  table.on('toolbar(test)', function(obj){
		    var checkStatus = table.checkStatus(obj.config.id);
		    switch(obj.event){
		      case 'getallData':
		        layer.msg('所有的数据');
		        $(".all").attr("id","all");
		        table.reload('testReload',{
		        	page:{
		        		curr: 1
		        	}
		        });
		        //所有的生产计划信息
				  table.render({
				    elem: '#all'
				    ,height: 312
				    ,url: 'allMapply' //数据接口
				    ,page: true //开启分页
				    ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
				    ,id:'testReload'
				    ,cols: 
					    [
					    	[ //表头
					      {field: 'id', title: '序列', width:80, sort: true, fixed: true}
					      ,{field: 'apply_id', title: '生产计划编号', width:130}
					      ,{field: 'product_id', title: '产品编号', width:130, sort: true}
					      ,{field: 'product_name', title: '产品名称', width:80} 
					      ,{field: 'product_describe', title: '产品描述', width: 177}
					      ,{field: 'type', title: '类型', width: 80, sort: true}
					      ,{field: 'amount', title: '数量', width: 80, sort: true}
					      ,{field: 'designer', title: '设计人', width: 80}
					      ,{field: 'remark', title: '备注', width: 135, sort: true}
					      ,{field: 'register', title: '登记人', width: 80}
					      ,{field: 'register_time', title: '登记时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.register_time)}}
					      ,{field: 'checker', title: '复核人', width: 80}
					      ,{field: 'check_suggestion', title: '审核意见', width: 135, sort: true}
					      ,{field: 'check_time', title: '审核时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.check_time)}}
					    	]
					    ]
				  });
		      break;
		      case 'getpassData':
		        layer.msg('已审核的数据');
		        $(".all").attr("id","pass");
		        table.reload('testReload',{
		        	page:{
		        		curr: 1
		        	}
		        });
		      //通过的生产计划信息
				  table.render({
				    elem: '#pass'
				    ,height: 312
				    ,url: 'allPassMapply' //数据接口
				    ,page: true //开启分页
				    ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
				    ,id: 'testReload'
				    ,cols: 
				    [
				    	[ //表头
				      {field: 'id', title: '序列', width:80, sort: true, fixed: true}
				      ,{field: 'apply_id', title: '生产计划编号', width:130}
				      ,{field: 'product_id', title: '产品编号', width:130, sort: true}
				      ,{field: 'product_name', title: '产品名称', width:80} 
				      ,{field: 'product_describe', title: '产品描述', width: 177}
				      ,{field: 'type', title: '类型', width: 80, sort: true}
				      ,{field: 'amount', title: '数量', width: 80, sort: true}
				      ,{field: 'designer', title: '设计人', width: 80}
				      ,{field: 'remark', title: '备注', width: 135, sort: true}
				      ,{field: 'register', title: '登记人', width: 80}
				      ,{field: 'register_time', title: '登记时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.register_time)}}
				      ,{field: 'checker', title: '复核人', width: 80}
				      ,{field: 'check_suggestion', title: '审核意见', width: 135, sort: true}
				      ,{field: 'check_time', title: '审核时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.check_time)}}
				   		]
				    ]
				  });
		      break;
		      case 'getawaitData':
		        layer.msg('未审核的数据');
		        $(".all").attr("id","await");
		        table.reload('testReload',{
		        	page:{
		        		curr: 1
		        	}
		        });
		      	//等待审核的生产计划信息
		        table.render({
				    elem: '#await'
				    ,height: 312
				    ,url: 'allAwaitMapply' //数据接口
				    ,page: true //开启分页
				    ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
				    ,id: 'testReload'
				    ,cols: 
					    [
					    	[ //表头
					      {field: 'id', title: '序列', width:80, sort: true, fixed: true}
					      ,{field: 'apply_id', title: '生产计划编号', width:130}
					      ,{field: 'product_id', title: '产品编号', width:130, sort: true}
					      ,{field: 'product_name', title: '产品名称', width:80} 
					      ,{field: 'product_describe', title: '产品描述', width: 177}
					      ,{field: 'type', title: '类型', width: 80, sort: true}
					      ,{field: 'amount', title: '数量', width: 80, sort: true}
					      ,{field: 'designer', title: '设计人', width: 80}
					      ,{field: 'remark', title: '备注', width: 135, sort: true}
					      ,{field: 'register', title: '登记人', width: 80}
					      ,{field: 'register_time', title: '登记时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.register_time)}}
					      ,{field: 'checker', title: '复核人', width: 80}
					      ,{field: 'check_suggestion', title: '审核意见', width: 135, sort: true}
					      ,{field: 'check_time', title: '审核时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.check_time)}}
					    	]
					    ]
				  });
		      break;
		      case 'getNoPassData':
		    	  layer.msg('审核不通过的数据');
		    	  $(".all").attr("id","NoPass");
			        table.reload('testReload',{
			        	page:{
			        		curr: 1
			        	}
			        });
		    	  //未通过的生产计划信息
				  table.render({
				    elem: '#NoPass'
				    ,height: 312
				    ,url: 'allNoPassMapply' //数据接口
				    ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
				    ,id: 'testReload'
				    ,page: true //开启分页
				    ,cols: 
				    [
				    	[ //表头
				      {field: 'id', title: '序列', width:80, sort: true, fixed: true}
				      ,{field: 'apply_id', title: '生产计划编号', width:130}
				      ,{field: 'product_id', title: '产品编号', width:130, sort: true}
				      ,{field: 'product_name', title: '产品名称', width:80} 
				      ,{field: 'product_describe', title: '产品描述', width: 177}
				      ,{field: 'type', title: '类型', width: 80, sort: true}
				      ,{field: 'amount', title: '数量', width: 80, sort: true}
				      ,{field: 'designer', title: '设计人', width: 80}
				      ,{field: 'remark', title: '备注', width: 135, sort: true}
				      ,{field: 'register', title: '登记人', width: 80}
				      ,{field: 'register_time', title: '登记时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.register_time)}}
				      ,{field: 'checker', title: '复核人', width: 80}
				      ,{field: 'check_suggestion', title: '审核意见', width: 135, sort: true}
				      ,{field: 'check_time', title: '审核时间', width: 135, sort: true,edit: 'text',templet: function(m){return layui.util.toDateString(m.check_time)}}
				    	]
				    ]
				  });
		   	  break;
		      //自定义头工具栏右侧图标 - 提示
		      case 'LAYTABLE_TIPS':
		        layer.alert('这是工具栏右侧自定义的一个图标按钮');
		      break;
		    };
		  });
 				  
 		  $('.demoTable .layui-btn').on('click', function(){
 			var type = $(this).data('type');
 			active[type] ? active[type].call(this) : '';
 		  });
 		  //条件查询
          $("#ss").on("click",function(){
                   table.reload("testReload",{
                       page: {
                           curr: 1 //重新从第 1 页开始
                       },
                       where: {
                      	 name: $("input[name=p_name]").val()  //搜索的关键字
                       }
                   });
           }); 
		  
		});
		
	</script>
	<script type="text/html" id="toolbarDemo">
  		<div class="layui-btn-container">
    		<button class="layui-btn layui-btn-sm" lay-event="getallData">所有的数据</button>
    		<button class="layui-btn layui-btn-sm" lay-event="getpassData">已审核的数据</button>
    		<button class="layui-btn layui-btn-sm" lay-event="getawaitData">未审核的数据</button>
			<button class="layui-btn layui-btn-sm" lay-event="getNoPassData">审核不通过的数据</button>
 		 </div>
	</script>
</html>